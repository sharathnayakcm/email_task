<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :name => 'edit_user'}, :remote => true) do |f| %>
  <table class="profile_mode flds form"  cellpadding = "0" cellspacing ="0" >
    <tbody>
      <%= f.fields_for :user_preference do |p| %>
        <tr class="row">
          <th><label for="user_user_preference_attributes_CUG view">CUG View</label>:</th>
          <td><%= p.select :cug_view, options_for_select(BeehiveView.default_cug_views.collect{|cv| [cv['view_name'],cv['id']]}, current_user.user_preference.cug_view)%></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th><label>Channel View</label>:</th>
          <td><%= p.select :channel_view, options_for_select(BeehiveView.default_channel_views.collect{|chv| [chv['view_name'],chv['id']]}, current_user.user_preference.channel_view)%></td>
          <td>&nbsp;</td>
        </tr>
        <tr class="row">
          <th><label>Tooltip View</label>:</th>
          <td><%= p.select :tooltip_view, options_for_select([["Long","long"], ["Short","short"]], current_user.user_preference.tooltip_view) %></td>
          <td>&nbsp;</td>
        </tr>
      <% end %>
      <tr>
        <th><a id="change_password_link" onClick="show_change_password_box();">Change Password</a></th>
        <td> <div id ="spinner" style="display: none;"><%= image_tag('small-spinner.gif') %></div></td>
      </tr>
      <tr class="change_password row" style="display:none" >
        <th><%= f.label :password %>:</th>
        <td><%= f.password_field :password %></td>
        <td>&nbsp;</td>
      </tr>
      <tr class="change_password" style="display:none">
        <th><label>Password Confirmation</label>:</th>
        <td><%= f.password_field :password_confirmation %></td>
        <td>&nbsp;</td>
      </tr>
      <tr class="row">
        <th><label>Display Name</label>:</th>
        <td><%= f.text_field :display_name %></td>
        <td>&nbsp;</td>
      </tr>

      <tr>
        <th><label>First Name</label>:</th>
        <td><%= f.text_field :first_name %></td>
        <td>&nbsp;</td>
      </tr>

      <tr class="row">
        <th><label>Last Name</label>:</th>
        <td><%= f.text_field :last_name %></td>
        <td>&nbsp;</td>
      </tr>

      <tr>
        <th><%= f.label :email %>:</th>
        <td><%= f.text_field :email,:disabled => true %></td>
        <td>&nbsp;</td>
      </tr>

      <tr class="row">
        <th><label>Dozz Email</label>:</th>
        <td><%= f.text_field :dozz_email %></td><td class ="help_icon"><%= image_tag("beehive-newui/query.png", :title=>"Dozz email address is <br />used to email a task against a buzz.") %></td>
      </tr>

      <tr class="row">
        <th><label>Dormant days</label>:</th>
        <td><%= f.text_field :dormant_days %></td>
      </tr>

      <tr>
        <th>&nbsp;</th>
        <td class="popup_actions"><%= submit_tag "Save" ,:class =>"inner_button" ,:disable_with => "Saving...", :onclick => "return profile_validation('edit_user');"%></td>
        <td>&nbsp;</td>
      </tr>
    </tbody>
  </table>
<% end %>
